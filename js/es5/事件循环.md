## Event Loop

JavaScript 事件循环机制分为浏览器和 Node 事件循环机制，两者的实现技术不一样，浏览器 Event Loop 是 HTML 中定义的规范，Node Event Loop 是由 libuv 库实现

js 是单线程 

所谓单线程，是指在 JavaScript 引擎中负责解释和执行 JavaScript 代码的线程唯一，同一时间上只能执行一件任务

**为什么要引入单线程**

如果 JavaScript 引擎线程不是单线程的，那么可以同时执行多段 JavaScript，如果这多段 JavaScript 都修改 DOM，那么就会出现 DOM 冲突

引入单线程就意味着，所有任务需要排队，前一个任务结束，才会执行后一个任务。这同时又导致了一个问题：如果前一个任务耗时很长，后一个任务就不得不一直等着

为了解决这个问题，JavaScript 语言将任务的执行模式分为两种：同步和异步

**同步**

如果在函数 func 返回的时候，调用者就能够得到预期结果(即拿到了预期的返回值或者看到了预期的效果)，那么这个函数就是同步的。

    let a = 1
    Math.floor(a)
    console.log(a) // 1

**异步**

如果在函数 func 返回的时候，调用者还不能够得到预期结果，而是需要在将来通过一定的手段得到，那么这个函数就是异步的

    fs.readFile('foo.txt', 'utf8', function(err, data) {
        console.log(data);
    });

JavaScript 采用异步编程原因有两点，

* 一是 JavaScript 是单线程；
* 二是为了提高 CPU 的利用率